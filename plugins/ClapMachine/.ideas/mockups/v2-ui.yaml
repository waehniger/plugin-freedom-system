window:
  width: 800
  height: 600
  resizable: false

colors:
  # Unified earth tone palette (TapeAge-inspired)
  base_panel: "#b5a58b"
  base_panel_dark: "#a89878"
  recessed: "#9d9078"
  knob_brown: "#7a6550"
  knob_brown_dark: "#68543e"
  knob_orange: "#96683e"
  knob_orange_dark: "#7d5530"
  knob_green: "#6d7a5e"
  knob_green_dark: "#5b684c"
  text_dark: "#4a3d2a"
  text_darker: "#3a2d1a"
  # Waveform colors
  waveform_flam: "#4a9eff"  # Blue-teal for flam
  waveform_body: "#d97634"  # Orange-amber for body
  waveform_bg: "#8a7d6b"

layout:
  type: vertical-sections
  sections:
    - id: header
      height: 100
      background: base_panel
      controls: [title, waveform_display]

    - id: main_panels
      height: 410
      type: horizontal-split
      subsections:
        - id: flam_panel
          width: 50%
          background: recessed
          label: "FLAM"
          controls: [timing_spread, layer_count, stereo_width, flam_filter_mode, flam_filter_cutoff, flam_filter_resonance]

        - id: body_panel
          width: 50%
          background: recessed
          label: "BODY"
          controls: [noise_type, tone_color, decay_release, body_filter_mode, body_filter_cutoff, body_filter_resonance]

    - id: mix_output
      height: 90
      background: base_panel_dark
      controls: [balance, drive, pitch, output_level]

controls:
  # HEADER
  - id: title
    type: label
    text: "CLAPMACHINE"
    style:
      font_weight: 300
      letter_spacing: 12px
      text_transform: uppercase
      color: text_dark
    position: {x: 30, y: 25}

  - id: waveform_display
    type: canvas
    width: 740
    height: 60
    position: {x: 30, y: 35}
    description: "Simulated dual-layer waveform (flam in blue-teal, body in orange-amber)"

  # FLAM PANEL - All controls uniform size and aligned in grid
  # Row 1: Main parameters (3 knobs, evenly spaced)
  - id: timing_spread
    type: rotary-knob
    label: "SPREAD"
    parameter: "FLAM_TIMING"
    range: [0.0, 100.0]
    unit: "ms"
    default: 15.0
    size: 65
    color: knob_brown
    position: {x: 70, y: 150}

  - id: layer_count
    type: rotary-knob-stepped
    label: "LAYERS"
    parameter: "FLAM_LAYERS"
    range: [2, 5]
    detents: [2, 3, 4, 5]
    default: 3
    size: 65
    color: knob_brown
    position: {x: 190, y: 150}

  - id: stereo_width
    type: rotary-knob
    label: "WIDTH"
    parameter: "FLAM_WIDTH"
    range: [0.0, 100.0]
    unit: "%"
    default: 50.0
    size: 65
    color: knob_brown
    position: {x: 310, y: 150}

  # Row 2: Filter controls (aligned directly below row 1)
  - id: flam_filter_mode
    type: three-way-switch
    label: "MODE"
    parameter: "FLAM_FILTER_MODE"
    options: ["LP", "BP", "HP"]
    default: "LP"
    position: {x: 70, y: 300}

  - id: flam_filter_cutoff
    type: rotary-knob
    label: "CUTOFF"
    parameter: "FLAM_FILTER_CUTOFF"
    range: [20.0, 20000.0]
    unit: "Hz"
    default: 8000.0
    skew: 0.3
    size: 65
    color: knob_green
    position: {x: 190, y: 300}

  - id: flam_filter_resonance
    type: rotary-knob
    label: "RESONANCE"
    parameter: "FLAM_FILTER_RESONANCE"
    range: [0.0, 100.0]
    unit: "%"
    default: 10.0
    size: 65
    color: knob_green
    position: {x: 310, y: 300}

  # BODY PANEL - Mirror FLAM layout
  # Row 1: Main parameters (3 controls, evenly spaced)
  - id: noise_type
    type: three-way-switch
    label: "NOISE"
    parameter: "BODY_NOISE_TYPE"
    options: ["WHITE", "PINK", "BROWN"]
    default: "PINK"
    position: {x: 470, y: 150}

  - id: tone_color
    type: rotary-knob
    label: "TONE"
    parameter: "BODY_TONE"
    range: [0.0, 100.0]
    unit: "%"
    default: 50.0
    size: 65
    color: knob_orange
    position: {x: 590, y: 150}

  - id: decay_release
    type: rotary-knob
    label: "DECAY"
    parameter: "BODY_DECAY"
    range: [10.0, 2000.0]
    unit: "ms"
    default: 200.0
    skew: 0.3
    size: 65
    color: knob_orange
    position: {x: 710, y: 150}

  # Row 2: Filter controls (aligned directly below row 1)
  - id: body_filter_mode
    type: three-way-switch
    label: "MODE"
    parameter: "BODY_FILTER_MODE"
    options: ["LP", "BP", "HP"]
    default: "LP"
    position: {x: 470, y: 300}

  - id: body_filter_cutoff
    type: rotary-knob
    label: "CUTOFF"
    parameter: "BODY_FILTER_CUTOFF"
    range: [20.0, 20000.0]
    unit: "Hz"
    default: 5000.0
    skew: 0.3
    size: 65
    color: knob_green
    position: {x: 590, y: 300}

  - id: body_filter_resonance
    type: rotary-knob
    label: "RESONANCE"
    parameter: "BODY_FILTER_RESONANCE"
    range: [0.0, 100.0]
    unit: "%"
    default: 5.0
    size: 65
    color: knob_green
    position: {x: 710, y: 300}

  # MIX/OUTPUT STRIP - 4 knobs evenly spaced
  - id: balance
    type: rotary-knob
    label: "BALANCE"
    parameter: "MIX_BALANCE"
    range: [0.0, 100.0]
    unit: "%"
    default: 50.0
    size: 65
    color: knob_brown
    position: {x: 110, y: 520}
    description: "0% = all Flam, 100% = all Body"

  - id: drive
    type: rotary-knob
    label: "DRIVE"
    parameter: "MIX_DRIVE"
    range: [0.0, 100.0]
    unit: "%"
    default: 0.0
    size: 65
    color: knob_brown
    position: {x: 280, y: 520}

  - id: pitch
    type: rotary-knob
    label: "PITCH"
    parameter: "MIX_PITCH"
    range: [-24.0, 24.0]
    unit: "st"
    default: 0.0
    size: 65
    color: knob_brown
    position: {x: 450, y: 520}

  - id: output_level
    type: rotary-knob
    label: "OUTPUT"
    parameter: "OUTPUT_LEVEL"
    range: [-60.0, 0.0]
    unit: "dB"
    default: -6.0
    size: 65
    color: knob_brown
    position: {x: 620, y: 520}

visual_elements:
  # Corner screws
  - type: svg-screw
    positions: [{x: 15, y: 15}, {x: 785, y: 15}, {x: 15, y: 585}, {x: 785, y: 585}]
    style: cross-head

  # Fractal noise overlay
  - type: svg-noise
    base_frequency: 1.5
    opacity: 0.15
    applied_to: [base_panel, recessed, all_knobs]

  # Recessed panel inner shadows
  - type: inner-shadow
    applied_to: [flam_panel, body_panel]
    blur: 8px
    offset: {x: 0, y: 2}
    color: "rgba(0, 0, 0, 0.3)"

  # Panel labels
  - type: section-label
    text: "FLAM"
    position: {x: 190, y: 125}
    style:
      font_weight: 300
      letter_spacing: 8px
      color: text_dark
      font_size: 11px

  - type: section-label
    text: "BODY"
    position: {x: 590, y: 125}
    style:
      font_weight: 300
      letter_spacing: 8px
      color: text_dark
      font_size: 11px

typography:
  font_family: "system-ui, -apple-system, sans-serif"
  title:
    weight: 300
    letter_spacing: 12px
    size: 18px
  labels:
    weight: 300
    letter_spacing: 8px
    size: 10px
    transform: uppercase
  values:
    weight: 400
    size: 11px

interactions:
  knob_rotation:
    sensitivity: medium
    value_arc: true
    pointer_indicator: true
  switch_toggle:
    animation: snap
    haptic_feel: discrete
  waveform_update:
    real_time: true
    smoothing: 0.3

grid_notes:
  # Precise grid alignment for perfect harmony
  flam_panel_columns: [70, 190, 310]  # 120px spacing between centers
  body_panel_columns: [470, 590, 710]  # 120px spacing between centers
  row_1_y: 150  # Top row of main controls
  row_2_y: 300  # Bottom row of filter controls
  mix_strip_y: 520  # Mix/output controls
  mix_strip_columns: [110, 280, 450, 620]  # 170px spacing
