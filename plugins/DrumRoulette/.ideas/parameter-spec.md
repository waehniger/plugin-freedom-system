# Parameter Specification: DrumRoulette

**CRITICAL CONTRACT:** This specification is immutable during implementation. Stage 1 Planning cannot proceed without this file. All subsequent stages reference these exact parameters.

**Generated by:** Manual creation from creative brief and UI mockup v4
**Referenced by:** Stage 3 (Shell), Stage 4 (DSP), Stage 5 (GUI)

## Total Parameter Count

**Total:** 73 parameters

**Breakdown:**
- Global: 1 parameter (Randomize All button)
- Per-Slot: 9 parameters × 8 slots = 72 parameters

## Global Parameters

### RANDOMIZE_ALL
- **Type:** Bool (button trigger)
- **Range:** Momentary trigger
- **Default:** False
- **Skew Factor:** N/A
- **UI Control:** Button in master section, labeled "RANDOMIZE ALL"
- **DSP Usage:** Triggers randomization on all unlocked slots simultaneously

## Per-Slot Parameters (×8)

Each slot has the following 9 parameters. Parameter IDs include slot number suffix (1-8).

### FOLDER_PATH_N
- **Type:** String (file path)
- **Range:** Valid directory path
- **Default:** Empty string
- **Skew Factor:** N/A
- **UI Control:** File browser button in channel strip N, labeled with folder icon
- **DSP Usage:** Path to folder containing audio samples for random selection

### RANDOMIZE_N
- **Type:** Bool (button trigger)
- **Range:** Momentary trigger
- **Default:** False
- **Skew Factor:** N/A
- **UI Control:** Button in channel strip N, labeled with dice icon
- **DSP Usage:** Triggers random sample selection from assigned folder for slot N

### LOCK_N
- **Type:** Bool (toggle)
- **Range:** Off/On
- **Default:** Off (unlocked)
- **Skew Factor:** N/A
- **UI Control:** Toggle button in channel strip N, labeled with lock icon (grey=unlocked, orange=locked)
- **DSP Usage:** When On, excludes slot N from RANDOMIZE_ALL action

### VOLUME_N
- **Type:** Float
- **Range:** -60.0 to 6.0 dB (-inf displayed at minimum)
- **Default:** 0.0 dB
- **Skew Factor:** 2.0 (exponential)
- **UI Control:** Vertical fader in channel strip N (centered, 180px height)
- **DSP Usage:** Channel gain control for slot N

### DECAY_N
- **Type:** Float
- **Range:** 10.0 to 2000.0 ms
- **Default:** 500.0 ms
- **Skew Factor:** 0.5 (logarithmic)
- **UI Control:** Rotary knob in channel strip N, labeled "Decay"
- **DSP Usage:** ADSR envelope decay time for slot N (sustain=0, percussive envelope)

### ATTACK_N
- **Type:** Float
- **Range:** 0.0 to 50.0 ms
- **Default:** 1.0 ms
- **Skew Factor:** 0.5 (logarithmic)
- **UI Control:** Rotary knob in channel strip N, labeled "Attack"
- **DSP Usage:** ADSR envelope attack time for slot N (percussive shaping)

### TILT_FILTER_N
- **Type:** Float
- **Range:** -12.0 to 12.0 dB
- **Default:** 0.0 dB
- **Skew Factor:** 1.0 (linear)
- **UI Control:** Rotary knob in channel strip N, labeled "Tilt"
- **DSP Usage:** Tilt filter brightness control (pivot at 1kHz), negative=darker, positive=brighter

### PITCH_N
- **Type:** Float
- **Range:** -12.0 to 12.0 semitones
- **Default:** 0.0 semitones
- **Skew Factor:** 1.0 (linear)
- **UI Control:** Rotary knob in channel strip N, labeled "Pitch"
- **DSP Usage:** Pitch shift in semitones for slot N

### SOLO_N
- **Type:** Bool (toggle)
- **Range:** Off/On
- **Default:** Off
- **Skew Factor:** N/A
- **UI Control:** Toggle button below fader in channel strip N, labeled "S"
- **DSP Usage:** When On, mutes all other slots (solo this slot)

### MUTE_N
- **Type:** Bool (toggle)
- **Range:** Off/On
- **Default:** Off
- **Skew Factor:** N/A
- **UI Control:** Toggle button below fader in channel strip N, labeled "M"
- **DSP Usage:** When On, silences slot N

## Parameter Groups

**Global Controls (1 parameter):**
- RANDOMIZE_ALL

**Slot 1 (9 parameters):**
- FOLDER_PATH_1, RANDOMIZE_1, LOCK_1, VOLUME_1, DECAY_1, ATTACK_1, TILT_FILTER_1, PITCH_1, SOLO_1, MUTE_1

**Slot 2 (9 parameters):**
- FOLDER_PATH_2, RANDOMIZE_2, LOCK_2, VOLUME_2, DECAY_2, ATTACK_2, TILT_FILTER_2, PITCH_2, SOLO_2, MUTE_2

**Slot 3 (9 parameters):**
- FOLDER_PATH_3, RANDOMIZE_3, LOCK_3, VOLUME_3, DECAY_3, ATTACK_3, TILT_FILTER_3, PITCH_3, SOLO_3, MUTE_3

**Slot 4 (9 parameters):**
- FOLDER_PATH_4, RANDOMIZE_4, LOCK_4, VOLUME_4, DECAY_4, ATTACK_4, TILT_FILTER_4, PITCH_4, SOLO_4, MUTE_4

**Slot 5 (9 parameters):**
- FOLDER_PATH_5, RANDOMIZE_5, LOCK_5, VOLUME_5, DECAY_5, ATTACK_5, TILT_FILTER_5, PITCH_5, SOLO_5, MUTE_5

**Slot 6 (9 parameters):**
- FOLDER_PATH_6, RANDOMIZE_6, LOCK_6, VOLUME_6, DECAY_6, ATTACK_6, TILT_FILTER_6, PITCH_6, SOLO_6, MUTE_6

**Slot 7 (9 parameters):**
- FOLDER_PATH_7, RANDOMIZE_7, LOCK_7, VOLUME_7, DECAY_7, ATTACK_7, TILT_FILTER_7, PITCH_7, SOLO_7, MUTE_7

**Slot 8 (9 parameters):**
- FOLDER_PATH_8, RANDOMIZE_8, LOCK_8, VOLUME_8, DECAY_8, ATTACK_8, TILT_FILTER_8, PITCH_8, SOLO_8, MUTE_8

## MIDI Implementation

**Note Mapping:**
- C1 (MIDI note 36) → Slot 1
- C#1 (MIDI note 37) → Slot 2
- D1 (MIDI note 38) → Slot 3
- D#1 (MIDI note 39) → Slot 4
- E1 (MIDI note 40) → Slot 5
- F1 (MIDI note 41) → Slot 6
- F#1 (MIDI note 42) → Slot 7
- G1 (MIDI note 43) → Slot 8

**Velocity Response:** Standard MIDI velocity controls initial gain

## Audio Routing

**Automatic Multi-Output Routing:**
- Stereo Main Output: Mix of all slots (outputs 1-2)
- Slot 1 Individual Output: Outputs 3-4
- Slot 2 Individual Output: Outputs 5-6
- Slot 3 Individual Output: Outputs 7-8
- Slot 4 Individual Output: Outputs 9-10
- Slot 5 Individual Output: Outputs 11-12
- Slot 6 Individual Output: Outputs 13-14
- Slot 7 Individual Output: Outputs 15-16
- Slot 8 Individual Output: Outputs 17-18

**Total Outputs:** 18 (2 main + 16 individual)

## Notes

- Parameters are implemented in EXACT order during Stage 3
- FOLDER_PATH and button parameters (RANDOMIZE, RANDOMIZE_ALL) require custom handling (not standard APVTS AudioParameterFloat)
- LOCK, SOLO, MUTE are AudioParameterBool
- VOLUME, DECAY, ATTACK, TILT_FILTER, PITCH are AudioParameterFloat
- Slot numbering: 1-8 (not 0-7) for user-facing labels
- Parameter IDs use UPPERCASE with underscores and slot suffix (_N where N=1-8)
- UI controls are implemented from finalized mockup v4 during Stage 5
- Master volume (UI-only control) is NOT a saveable parameter
